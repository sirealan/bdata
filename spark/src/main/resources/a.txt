export SPARK_HISTORY_OPTS="
-Dspark.history.ui.port=18080
-Dspark.history.fs.logDirectory=hdfs://hd1:8020/spark/history
-Dspark.history.retainedApplications=30"

sbin/start-all.sh
sbin/start-history-server.sh

bin/spark-submit \
--class org.apache.spark.examples.SparkPi \
--master spark://hd1:7077,hd2:7077 \
./examples/jars/spark-examples_2.12-3.1.1.jar \
10

#Master 监控页面默认访问端口为 8080，但是可能会和 Zookeeper 冲突，所以改成 8989，也可以自
定义，访问 UI 监控页面时请注意
SPARK_MASTER_WEBUI_PORT=8989
export SPARK_DAEMON_JAVA_OPTS="
-Dspark.deploy.recoveryMode=ZOOKEEPER
-Dspark.deploy.zookeeper.url=hd1,hd2,hd3
-Dspark.deploy.zookeeper.dir=/spark"


bin/spark-submit \
--class org.apache.spark.examples.SparkPi \
--master yarn \
--deploy-mode cluster \
./examples/jars/spark-examples_2.12-3.1.1.jar \
10